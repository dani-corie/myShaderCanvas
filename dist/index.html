<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mew</title>
  <style>
    body {
        justify-content: center;
        align-items: center;
        text-align: center;
        height: 100vh;
        margin: 0;
    }

    /* Center text within block elements */
    .block-element, 
    canvas, 
    img {
        display: block;
        margin: 0 auto;
    }

    #gl {
      width: 1024px;
      height: 1024px;
    }
  </style>
</head>

<body>
  <h1>Shader Test Harness</h1>
  <div id="gl" class="block-element"></div>
  <!--    <p id="fps"></p>-->
  <video id="webcam" style="display:none;" autoplay></video>

  <script type="module">
    import { init } from '/scripts/myGLCanvas.mjs'

    console.log("hi!")
    const urlParams = new URLSearchParams(window.location.search);
    console.log(urlParams)
    let descriptor = urlParams.get('descriptor');

    if (!descriptor) {
      descriptor = "/testshader.json"
      console.log("You can set a descriptor via ?descriptor=whatever.json... no descriptor set, so falling back on /testshader.json");
    }

    init({
      dimensions: {
        width: 1024,
        height: 1024
      },
      webcam: {
        video_constraints: { facingMode: 'user' },
        video_element_id: 'webcam',
      },
      renderer: {
        container_element_id: 'gl'
      }
    }, descriptor);
  </script>
</body>

</html>